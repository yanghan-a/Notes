# 轨迹规划期实现文档

该文档记录实现基本轨迹规划的思路。参考电机运动控制不同模式下每个周期的执行逻辑

## 效果

实现在笛卡尔空间下的规划，计算逆运动学解后控制电机执行，逆运动学求解耗时约为200微妙。

## 基本参数

### 控制周期

类似于电机的控制周期，轨迹规划也使用周期的方式，**边规划边执行**，设定规划周期为200Hz，考虑到逆运动学求解的耗时，这个频率是可以达到的。

### 控制模式

主要设计一下几种路径：直线模式、圆形轨迹

### 轨迹插值

#### 直线模式

定义一个直线模式类，包含参数当前姿态（这个值可以直接从dummy类获取）、目标姿态

设计一个用户函数，参数为笛卡尔6轴姿态和插值个数，将该值赋值给目标姿态。每次规划基于当前姿态和目标姿态，在执行任务过程中当前姿态要分两个，一个会实时变化，另一个不会实时变化，只在任务完成才更新。定义一个变量来记录任务执行进度，0<=计数器<=插值个数。

一个规划函数，该函数的参数是当前任务执行进度计数值，函数内部基于目标和当前姿态以及进度值来计数插值位姿，获得插值位姿以后调用逆运动学求解函数获得关节角，在定时周期内调用move_joints来执行。

### 函数

选择模式的函数

用户给定目标的函数